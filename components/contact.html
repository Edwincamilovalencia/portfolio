<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Contacto</title>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
    <section id="contactame" class="content-section">
        <h2>Contáctame</h2>
        <div class="contact-container">
            <form id="contactForm">
                <div class="form-group">
                    <label for="name">Nombre:</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="email">Correo Electrónico:</label>
                    <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                    <label for="message">Mensaje:</label>
                    <textarea id="message" name="message" rows="5" required></textarea>
                </div>
                <button type="submit" class="btn-hover-effect">Enviar Mensaje</button>
            </form>
        </div>
    </section>

    <script>
        // Inicializar EmailJS
        (function() {
            emailjs.init("eiaRBfy6I2Dacouy4");
            console.log("EmailJS inicializado correctamente");
        })();

        // Agregar el event listener cuando el DOM esté cargado
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('contactForm').addEventListener('submit', function(event) {
                event.preventDefault();
                console.log("Formulario enviado");

                // Obtener los valores del formulario
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const message = document.getElementById('message').value;

                console.log("Valores del formulario:", { name, email, message });

                // Deshabilitar el botón
                const button = this.querySelector('button');
                button.disabled = true;
                button.textContent = 'Enviando...';

                // Preparar los parámetros del template
                const templateParams = {
                    to_name: "Admin",
                    from_name: name,
                    reply_to: email,
                    message: message
                };

                console.log("Enviando email con parámetros:", templateParams);

                // Enviar el email
                emailjs.send('service_kkudgzm', 'template_n7qtgrj', templateParams)
                    .then(function(response) {
                        console.log('ÉXITO:', response);
                        alert('¡Mensaje enviado con éxito!');
                        document.getElementById('contactForm').reset();
                    })
                    .catch(function(error) {
                        console.error('ERROR:', error);
                        alert('Error al enviar el mensaje. Por favor, revisa la consola para más detalles.');
                    })
                    .finally(function() {
                        button.disabled = false;
                        button.textContent = 'Enviar Mensaje';
                    });
            });
        });
    </script>
</body>
</html>